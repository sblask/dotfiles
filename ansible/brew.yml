- name: Play to install Brew packages
  hosts: all

  tasks:

    - name: Install homebrew packages
      community.general.homebrew:
        name: "{{ item }}"
      loop:
        - bash
        - bat
        - colima
        - colordiff
        - coreutils
        - docker  # this is the docker cli (https://github.com/docker/cli), not docker desktop
        - docker-compose
        - docker-credential-helper-ecr
        - entr
        - fd
        - gnu-sed
        - gnu-tar
        - gpg
        - grep
        - htop
        - jo
        - jq
        - moreutils
        - neovim
        - oath-toolkit
        - rename
        - ripgrep
        - shellcheck
        - terraform-docs
        - tmux
        - tree

    - name: Install homebrew casks
      community.general.homebrew_cask:
        name: "{{ item }}"
      loop:
        - alt-tab
        - aws-vault
        - firefox
        - inkscape
        - iterm2
        - meld
        - postman
        - rectangle
        - redquits

    - name: Create docker CLI plugin directory
      file:
        path: "{{ target_directory }}/.docker/cli-plugins"
        state: directory
        mode: 0755

    - name: Create docker compose symlink
      file:
        src: /opt/homebrew/opt/docker-compose/bin/docker-compose
        dest: "{{ target_directory }}/.docker/cli-plugins/docker-compose"
        state: link
